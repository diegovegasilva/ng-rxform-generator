<form [formGroup]="form"
      class="form">
    <div class="form-group"
         *ngFor="let field of fields">

        <!-- Input text -->
        <!-- <mat-form-field *ngIf="field.inputType === 'text' && field.useMaterial">
            <input matInput
                   [type]="field.fieldType"
                   [placeholder]="field.placeholder"
                   [readonly]="field.readonly"
                   formControlName="{{field.key}}">
            <mat-error *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</mat-error>
            <mat-error *ngIf="form.controls[field.key].hasError('email') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_EMAIL}}</mat-error>
            <mat-error *ngIf="form.controls[field.key].hasError('minLength') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_MINLENGTH}}</mat-error>
            <mat-error *ngIf="form.controls[field.key].hasError('maxLength') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_MAXLENGTH}}</mat-error>
            <mat-error *ngIf="form.controls[field.key].hasError('pattern') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_PATTERN}}</mat-error>
        </mat-form-field> -->

        <div class="form-control"
             *ngIf="field.inputType === 'text' && !field.useMaterial">
            <input [type]="field.fieldType"
                   [placeholder]="field.placeholder"
                   [readonly]="field.readonly"
                   formControlName="{{field.key}}">
            <!-- TO DO -->
            <!--
                    loop through custom validation fields
                   -->
            <p class="error"
               *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</p>
            <p class="error"
               *ngIf="form.controls[field.key].hasError('email') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_EMAIL}}</p>
            <p class="error"
               *ngIf="form.controls[field.key].hasError('minLength') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_MINLENGTH}}</p>
            <p class="error"
               *ngIf="form.controls[field.key].hasError('maxLength') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_MAXLENGTH}}</p>
            <p class="error"
               *ngIf="form.controls[field.key].hasError('pattern') && !form.controls[field.key].hasError('required')">{{errorMsg.INVALID_PATTERN}}</p>
        </div>


        <!-- Textarea -->

        <!-- <mat-form-field *ngIf="field.inputType === 'textarea'">
            <textarea matInput
                      formControlName="{{field.key}}"
                      [readonly]="field.readonly"
                      [disabled]="field.disabled"
                      [placeholder]="field.placeholder"></textarea>
            <mat-error *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</mat-error>
          </mat-form-field> -->

        <div class="form-control"
             *ngIf="field.inputType === 'textarea' && !field.useMaterial">
            <textarea formControlName="{{field.key}}"
                      [readonly]="field.readonly"
                      [placeholder]="field.placeholder">
            </textarea>
            <p class="error"
               *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</p>
        </div>

        <!-- Select -->

        <div class="form-control"
             *ngIf="field.inputType === 'select' && !field.useMaterial">
            <select formControlName="{{field.key}}">
              <option *ngIf="field.placeholder" disabled>
                {{field.placeholder}}
              </option>
            <option *ngFor="let value of field.options | async"
                        [value]="value[field.optionKeys.key]">
              {{value[field.optionKeys.value]}}
            </option>
          </select>
            <p class="error"
               *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</p>
        </div>

        <!-- <mat-form-field *ngIf="field.inputType === 'select'">
          <mat-select [placeholder]="field.placeholder"
                      formControlName="{{field.key}}">
            <mat-option *ngFor="let value of field.options | async"
                        [value]="value[field.optionKeys.key]">
              {{value[field.optionKeys.value]}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</mat-error>
        </mat-form-field> -->


        <!-- Checkbox -->

        <div class="form-control"
             *ngIf="field.inputType === 'checkbox' && !field.useMaterial">
            <label *ngIf="field.label"
                   [for]="field.key">{{field.label}}</label>
            <input type="checkbox"
                   formControlName="{{field.key}}" />
            <p class="error"
               *ngIf="form.controls[field.key].hasError('requiredTrue')">{{errorMsg.REQUIRED_FIELD}}</p>
        </div>

        <!-- <ng-container *ngIf="field.inputType === 'checkbox'">
            <mat-checkbox formControlName="{{field.key}}">{{field.placeholder}}</mat-checkbox>
            <mat-error *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</mat-error>
        </ng-container> -->


        <!-- Date -->
        <div class="form-control"
             *ngIf="field.inputType === 'date' && !field.useMaterial">
            <input [type]="field.fieldType"
                   [readonly]="field.readonly"
                   [max]="field.max"
                   [min]="field.min"
                   [step]="field.step"
                   formControlName="{{field.key}}">
            <p class="error"
               *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</p>
        </div>

        <!-- Number -->
        <div class="form-control"
             *ngIf="field.inputType === 'number' && !field.useMaterial">
            <input [type]="'number'"
                   [placeholder]="field.placeholder"
                   [readonly]="field.readonly"
                   [max]="field.max"
                   [min]="field.min"
                   [step]="field.step"
                   formControlName="{{field.key}}">
            <p class="error"
               *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</p>
        </div>

        <div class="form-control"
             *ngIf="field.inputType === 'radio' && !field.useMaterial">
            <legend *ngIf="field.legend">{{field.legend}}</legend>
            <div class="form-radio-group" *ngFor="let option of field.options">
                <label>{{option.label || option.value}}</label>
                <input type="radio" [value]="option.value"
                       formControlName="{{field.key}}" />
            </div>
            <p class="error"
               *ngIf="form.controls[field.key].hasError('required')">{{errorMsg.REQUIRED_FIELD}}</p>
        </div>


    </div>


</form>
